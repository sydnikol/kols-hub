<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />

    <!-- Primary Meta Tags -->
    <title>Kol's Hub - Self-Evolving Personal OS</title>
    <meta name="title" content="Kol's Hub - Self-Evolving Personal OS">
    <meta name="description" content="Your comprehensive personal operating system for health, creativity, and daily life management. 9,000+ features across all platforms.">

    <!-- Theme & App Meta -->
    <meta name="theme-color" content="#8b5cf6" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#a78bfa" media="(prefers-color-scheme: light)" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kol's Hub">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-192.png" />
    <link rel="apple-touch-icon" sizes="167x167" href="/icon-192.png" />

    <!-- iOS Splash Screens -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-startup-image" href="/icon-512.png">

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Resource Hints - minimal for faster FCP -->
    <link rel="preconnect" href="https://www.googleapis.com" crossorigin>
    <link rel="dns-prefetch" href="https://accounts.google.com">

    <!-- Critical CSS - Inlined for fastest paint -->
    <style>
      *{margin:0;padding:0;box-sizing:border-box}
      html{-webkit-text-size-adjust:100%}
      body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#0a0a0f;color:#f3f4f6;overflow-x:hidden;line-height:1.5}
      #root{width:100%;min-height:100vh;contain:layout style}
      .app-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;height:100dvh;background:#0a0a0f;color:white;contain:layout style paint}
      .app-loading h1{font-size:2rem;margin-bottom:0.5rem;font-weight:700;background:linear-gradient(135deg,#a78bfa,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
      .app-loading p{font-size:1rem;opacity:0.8}
      .spinner{width:40px;height:40px;border:3px solid rgba(139,92,246,0.3);border-top-color:#a78bfa;border-radius:50%;animation:spin 0.8s linear infinite;margin:1.5rem 0}
      @keyframes spin{to{transform:rotate(360deg)}}
      .logo-placeholder{width:80px;height:80px;background:linear-gradient(135deg,#7c3aed,#ec4899);border-radius:20px;margin-bottom:1rem;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:bold;color:white}
    </style>
    <script type="module" crossorigin src="/assets/index-C5L4qhqU.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/lodash-3qv9jIIe.js">
    <link rel="modulepreload" crossorigin href="/assets/react-core-BAYfYUMR.js">
    <link rel="modulepreload" crossorigin href="/assets/vendor-DZF5XJVs.js">
    <link rel="modulepreload" crossorigin href="/assets/three-core-DsdBlP4m.js">
    <link rel="modulepreload" crossorigin href="/assets/react-three-DVn2HEcS.js">
    <link rel="modulepreload" crossorigin href="/assets/react-router-BmMx-5By.js">
    <link rel="modulepreload" crossorigin href="/assets/icons-BJIpI2IL.js">
    <link rel="modulepreload" crossorigin href="/assets/database-ClW73STj.js">
    <link rel="modulepreload" crossorigin href="/assets/animation-DtuH80Wc.js">
    <link rel="stylesheet" crossorigin href="/assets/index-Cdls00fS.css">
  <link rel="manifest" href="/manifest.webmanifest"></head>
  <body>
    <!-- Optimized Loading Screen -->
    <div id="root">
      <div class="app-loading">
        <div class="logo-placeholder">K</div>
        <h1>Kol's Hub</h1>
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
    </div>

    <!-- Error Handler and Platform Detection -->
    <script>
      // Platform detection - do this first
      window.platform={
        isElectron:!!window.electronAPI,
        isMobile:!!window.Capacitor,
        isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent),
        isAndroid:/Android/.test(navigator.userAgent)
      };

      // Only show fatal errors, not service worker issues
      window.onerror = function(msg, url, line, col, error) {
        console.error('App error:', msg, url, line);
        // Don't crash the UI for non-fatal errors
        return true;
      };

      // Don't crash on promise rejections - just log them
      window.addEventListener('unhandledrejection', function(event) {
        console.warn('Unhandled rejection:', event.reason);
        event.preventDefault(); // Prevent default error display
      });

      // Only register SW on web (not Capacitor/Android)
      if('serviceWorker'in navigator && !window.Capacitor){
        window.addEventListener('load',()=>{
          setTimeout(()=>{
            navigator.serviceWorker.register('/sw.js').catch(e=>console.log('SW skip:',e));
          },2000);
        });
      }
    </script>

    <!-- React App Entry Point -->
  </body>
</html>
